"use strict";(function(){jQuery(function(i){var a,t,n,o,e,r,m,s,u,c,d,l,_;if(u=function(e){var t,n,r,i,a,o,m;for(o=/([^&=]+)=?([^&]*)/g,n=/\+/g,t=function(e){return decodeURIComponent(e.replace(n," "))},a={},r=null;r=o.exec(e);)i=t(r[1]),m=t(r[2]),"[]"===i.substring(i.length-2)?(a[i=i.substring(0,i.length-2)]||(a[i]=[])).push(m):a[i]=m;return a},_=null!=(c=window.wc_memberships_for_teams_admin)?c:{},null!=(d=window.typenow)?d:"",s=null!=(l=window.pagenow)?l:"",e=WC_Memberships_Modal_View.extend({addButton:function(e){var t,n;return e.preventDefault(),n=this.$("form").attr("action"),(t=this.$("form").serialize())&&(-1<n.indexOf("?")?n+="&"+t:n+="?"+t),window.location=n}}),"wc_memberships_team"===s&&(i(".wc-memberships-for-teams-date-input .date-picker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0}),a=i("#members-filter"),m=function(){var e,t,n;return n=u(location.search.substring(1)),e=u(a.find(":input").serialize()),(t=i.extend(n,e)).action="edit",delete t.action2,window.location.search="?"+i.param(t)},r=function(e){var t,n,r;return t=i(e).closest(".bulkactions").find('[name^="action"]').val(),(n=u(a.find("#the-list :input").serialize())).action=t,n.post=i("#post_ID").val(),n._wpnonce=_.bulk_edit_team_members_nonce,r=_.post_url+"?"+i.param(n),"team_bulk_remove_members"===t?new o({data:{bulk_action:!0,url:r}}):window.location=r},t=WC_Memberships_Member_Modal_View.extend({template_id:"wc-memberships-for-teams-modal-add-team-member",handleAction:function(t){var e,n,r;return n=this,r=i("#post_ID").val(),e={user_id:t,team_id:r,action:"wc_memberships_for_teams_get_existing_user_membership_id",security:_.get_existing_user_membership_nonce},i.get(_.ajax_url,e,function(e){return e.success&&e.data?window.confirm(_.i18n.confirm_user_membership_move)?n.add_member(t,r):n.unblock():n.add_member(t,r)})},add_member:function(e,t){var n;return i(document.body).trigger("wc_backbone_modal_response",[this._target,{user:e}]),n={action:"team_add_member",post:t,user:e,_wpnonce:_.add_team_member_nonce},window.location=_.post_url+"?"+i.param(n)}}),a.on("click","#search-submit, #team-member-query-submit",function(e){return e.preventDefault(),m()}),a.on("keypress",function(e){if(13===e.which)return i(e.target).closest(".bulkactions").length?(e.preventDefault(),r(e.target)):(e.preventDefault(),m())}),a.on("click",".bulkactions .action",function(e){return e.preventDefault(),r(e.target)}),i(document).on("click",".js-add-team-member",function(e){return e.preventDefault(),new t}),a.on("click",".members a.remove",function(e){return e.preventDefault(),new o({data:{url:i(e.target).attr("href")}})}),o=e.extend({template_id:"wc-memberships-for-teams-modal-confirm-remove-member"})),"wc_memberships_team"===s||"edit-wc_memberships_team"===s)return n=e.extend({template_id:"wc-memberships-for-teams-modal-confirm-delete-team"}),i(document).on("click","a.submitdelete.delete-team, a.submitdelete.deletion",function(e){return e.preventDefault(),new n({data:{url:i(e.target).attr("href")}})}),i("input#post_author").remove(),i(document).on("submit.edit-team","#post",function(e){if("auto-draft"!==i("#original_post_status")&&i("#original_post_author").val()!==i("#post_author").val()&&(e.preventDefault(),window.confirm(_.i18n.confirm_change_team_owner)))return i(document).off("submit.edit-team"),i("#post").submit()})})}).call(void 0);